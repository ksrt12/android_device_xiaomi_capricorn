From d0fc1443fa68db8d8d4857be312c515510cc0606 Mon Sep 17 00:00:00 2001
From: Jiyong Park <jiyong@google.com>
Date: Wed, 18 Apr 2018 22:22:11 +0900
Subject: [PATCH 07/17] Fix build error

due to signature change by 8328367c44085b948c003116c0ed74a047237a69

Test: m -j
Change-Id: I5b21c68f523baf66bc219e5784496ba2fd47379e
Signed-off-by: Joe Maples <joe@frap129.org>
---
 cc/config/global.go | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

diff --git a/cc/config/global.go b/cc/config/global.go
index 146a26c6..e06a8a11 100644
--- a/cc/config/global.go
+++ b/cc/config/global.go
@@ -364,35 +364,35 @@ func setSdclangVars() {
 	}
 
 	// Override SDCLANG_PATH if the variable is set in the environment
-	pctx.VariableFunc("SDClangBin", func(config android.Config) (string, error) {
-		if override := config.Getenv("SDCLANG_PATH"); override != "" {
-			return override, nil
+	pctx.VariableFunc("SDClangBin", func(ctx android.PackageVarContext) string {
+		if override := ctx.Config().Getenv("SDCLANG_PATH"); override != "" {
+			return override
 		}
-		return sdclangPath, nil
+		return sdclangPath
 	})
 
 	// Override SDCLANG_PATH_2 if the variable is set in the environment
-	pctx.VariableFunc("SDClangBin2", func(config android.Config) (string, error) {
-		if override := config.Getenv("SDCLANG_PATH_2"); override != "" {
-			return override, nil
+	pctx.VariableFunc("SDClangBin2", func(ctx android.PackageVarContext) string {
+		if override := ctx.Config().Getenv("SDCLANG_PATH_2"); override != "" {
+			return override
 		}
-		return sdclangPath2, nil
+		return sdclangPath2
 	})
 
 	// Override SDCLANG_COMMON_FLAGS if the variable is set in the environment
-	pctx.VariableFunc("SDClangFlags", func(config android.Config) (string, error) {
-		if override := config.Getenv("SDCLANG_COMMON_FLAGS"); override != "" {
-			return override, nil
+	pctx.VariableFunc("SDClangFlags", func(ctx android.PackageVarContext) string {
+		if override := ctx.Config().Getenv("SDCLANG_COMMON_FLAGS"); override != "" {
+			return override
 		}
-		return sdclangAEFlag + " " + sdclangFlags, nil
+		return sdclangAEFlag + " " + sdclangFlags
 	})
 
 	// Override SDCLANG_COMMON_FLAGS_2 if the variable is set in the environment
-	pctx.VariableFunc("SDClangFlags2", func(config android.Config) (string, error) {
-		if override := config.Getenv("SDCLANG_COMMON_FLAGS_2"); override != "" {
-			return override, nil
+	pctx.VariableFunc("SDClangFlags2", func(ctx android.PackageVarContext) string {
+		if override := ctx.Config().Getenv("SDCLANG_COMMON_FLAGS_2"); override != "" {
+			return override
 		}
-		return sdclangAEFlag + " " + sdclangFlags2, nil
+		return sdclangAEFlag + " " + sdclangFlags2
 	})
 }
 
-- 
2.19.1

