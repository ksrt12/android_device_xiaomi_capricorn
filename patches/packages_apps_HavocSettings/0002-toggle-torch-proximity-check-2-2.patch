From c3365ab6002afa33cd2488cbd1788262e1118680 Mon Sep 17 00:00:00 2001
From: Kazakov Stepan <ksrt12group@gmail.com>
Date: Tue, 22 Jan 2019 12:31:50 +0300
Subject: [PATCH 2/2] toggle torch proximity check [2/2]

Signed-off-by: Kazakov Stepan <ksrt12group@gmail.com>
---
 res/values-ru/havoc_strings.xml    | 2 ++
 res/values/havoc_strings.xml       | 2 ++
 res/xml/havoc_settings_buttons.xml | 7 +++++++
 3 files changed, 11 insertions(+)

diff --git a/res/values-ru/havoc_strings.xml b/res/values-ru/havoc_strings.xml
index 1c19e03..7f57119 100644
--- a/res/values-ru/havoc_strings.xml
+++ b/res/values-ru/havoc_strings.xml
@@ -602,6 +602,8 @@
     <string name="hardware_keys_power_category">Кнопка питания</string>
     <string name="torch_long_press_power_gesture_title">Включение фонарика долгим нажатием кнопки питания</string>
     <string name="torch_long_press_power_gesture_desc">Включать фонарик долгим нажатием кнопки питания при выключенном экране</string>
+    <string name="torch_long_press_power_check_title">Проверка датчика приближения</string>
+    <string name="torch_long_press_power_check_desc">Проверять датчик приближения перед ключением фонарика</string>
     <string name="torch_long_press_power_timeout_title">Автоматическое выключение фонарика</string>
     <string name="torch_long_press_power_timeout_never">Никогда</string>
     <string name="torch_long_press_power_timeout_1min">1 минутa</string>
diff --git a/res/values/havoc_strings.xml b/res/values/havoc_strings.xml
index ca27d73..bc349e9 100644
--- a/res/values/havoc_strings.xml
+++ b/res/values/havoc_strings.xml
@@ -674,6 +674,8 @@
     <string name="hardware_keys_power_category">Power Button</string>
     <string name="torch_long_press_power_gesture_title">Screen off power button torch</string>
     <string name="torch_long_press_power_gesture_desc">Long press power button while the screen is off to turn on the flashlight</string>
+    <string name="torch_long_press_power_check_title">Proximity check for torch</string>
+    <string name="torch_long_press_power_check_desc">Check proximity sensor before turning on the flashlight</string>
     <string name="torch_long_press_power_timeout_title">Automatically turn torch off</string>
     <string name="torch_long_press_power_timeout_never">Never</string>
     <string name="torch_long_press_power_timeout_1min">1 minute</string>
diff --git a/res/xml/havoc_settings_buttons.xml b/res/xml/havoc_settings_buttons.xml
index 4dc90e5..d8d4b9b 100644
--- a/res/xml/havoc_settings_buttons.xml
+++ b/res/xml/havoc_settings_buttons.xml
@@ -90,6 +90,13 @@
             android:summary="@string/torch_long_press_power_gesture_desc"
             android:defaultValue="false" />
 
+        <com.havoc.support.preferences.SystemSettingSwitchPreference
+            android:key="torch_long_press_power_check"
+            android:title="@string/torch_long_press_power_check_title"
+            android:summary="@string/torch_long_press_power_check_desc"
+            android:dependency="torch_long_press_power_gesture"
+            android:defaultValue="false" />
+
         <ListPreference
             android:key="torch_long_press_power_timeout"
             android:dialogTitle="@string/torch_long_press_power_timeout_title"
-- 
2.20.1

